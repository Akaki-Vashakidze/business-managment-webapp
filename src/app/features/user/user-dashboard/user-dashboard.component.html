<div class="dashboard-wrapper">
  
  <div class="promo-banner">
    <div class="banner-content">
      <h1>{{'WELCOME_BACK_CHAMPION' | translate}}</h1>
      <p>{{'READY_FOR_YOUR_NEXT_SESSION' | translate}} {{availableCount}} {{'PLAYSTATIONS_ARE_WAITING' | translate }}</p>
      <div class="banner-badge">{{'PRICE_PER_HOUR' | translate}}</div>
    </div>
  </div>

  <div class="dashboard-grid">
    <div class="main-content">
      
      <section class="card-section my-reservations">
        <div class="section-header">
          <div class="title-with-badge">
            <h2>{{'MY_BOOKINGS' | translate}}</h2>
            <span class="count-badge">{{ myReservations.length }}</span>
          </div>
        </div>

        <div class="reservations-list" *ngIf="myReservations.length > 0; else noReservations">
          <div class="res-card" *ngFor="let res of myReservations">
            <div class="res-info">
              <span class="res-date">{{ res.date | date:'EEE, MMM d' }}</span>
              <span class="res-time">
                {{ formatTime(res.startHour, res.startMinute) }} - {{ formatTime(res.endHour, res.endMinute) }}
              </span>
            </div>
            
            <div class="res-actions">
              <div class="status-group">
                <span class="status-pill" [class.paid]="res.isPaid">
                  {{ res.isPaid ? 'PAID' : 'UNPAID' }}
                </span>
                <span class="status-pill highlight" *ngIf="res.accepted">{{'READY' | translate}}</span>
              </div>
              
              <button class="cancel-btn" (click)="deleteMyReservation(res._id || '')">
                {{'CANCEL' | translate}}
              </button>
            </div>
          </div>
        </div>

        <ng-template #noReservations>
          <div class="empty-state">
            <p>{{'NO_ACTIVE_RESERVATIONS' | translate}}</p>
          </div>
        </ng-template>
      </section>

      <section class="card-section">
        <div class="section-header">
          <h2>{{'QUICK_BOOKING' | translate}}</h2>
          <span class="live-indicator">{{'LIVE' | translate}}</span>
        </div>
        <app-item-reservations (statsUpdated)="statsUpdated($event)"></app-item-reservations>
      </section>
    </div>

    <aside class="sidebar-content">
      <div class="stat-card" [class.low-stock]="availableCount <= 1">
        <h3>{{'AVAILABLE_NOW' | translate}}</h3>
        <div class="stat-value">{{ availableCount }} / {{ totalItems }}</div>
        <p>{{ availableCount > 0 ? 'STATIONS_FREE' : 'FULLY_BOOKED' | translate}}</p>
      </div>

      <div class="info-card">
        <h3>{{'LOCATION_INFO' | translate}}</h3>
        <p>üìç {{'LOCATION_RUSTAVI_GEORGIA' | translate}}</p>
        <p>üìû +995 598 120 220</p>
        <a href="https://maps.app.goo.gl/SoHcM5HtjQvaeXKa8" target="_blank" class="map-link">{{'OPEN_IN_MAPS' | translate}}</a>
      </div>
    </aside>
  </div>
</div>