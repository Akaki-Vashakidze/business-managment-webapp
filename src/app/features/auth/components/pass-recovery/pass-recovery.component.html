<div class="recovery-wrapper">
  <div class="progress-bar">
    <div class="dot" [class.active]="currentStep >= 1"></div>
    <div class="line" [class.active]="currentStep >= 2"></div>
    <div class="dot" [class.active]="currentStep >= 2"></div>
    <div class="line" [class.active]="currentStep >= 3"></div>
    <div class="dot" [class.active]="currentStep >= 3"></div>
  </div>

  <div class="step-content" *ngIf="currentStep === 1">
    <h1>Identity</h1>
    <p>Enter your phone number to receive a 4-digit reset code.</p>
    <div class="input-box">
      <input type="tel" [(ngModel)]="recoveryData.phone" placeholder="+995 5xx xxx xxx">
    </div>
    <button class="primary-btn" (click)="sendCode()" [disabled]="loading">
      {{ loading ? 'Sending...' : 'Send SMS Code' }}
    </button>
  </div>

  <div class="step-content" *ngIf="currentStep === 2">
    <h1>Verification</h1>
    <p>Type the code sent to {{ recoveryData.phone }}</p>
    <div class="input-box otp-inputs">
      <input type="text" [(ngModel)]="recoveryData.code" maxlength="6" placeholder="000000" class="otp-field">
    </div>
    <button class="primary-btn" (click)="verifyCode()" [disabled]="loading">Verify Code</button>
    <button class="text-link" (click)="currentStep = 1">Wrong number?</button>
  </div>

  <div class="step-content" *ngIf="currentStep === 3">
    <h1>New Password</h1>
    <p>Set a strong password for your account.</p>
    <div class="input-box">
      <label>New Password</label>
      <input type="password" [(ngModel)]="recoveryData.password" placeholder="••••••••">
    </div>
    <div class="input-box">
      <label>Repeat Password</label>
      <input type="password" [(ngModel)]="recoveryData.confirmPassword" placeholder="••••••••">
    </div>
    <button class="primary-btn" (click)="resetPassword()" [disabled]="loading">Update Password</button>
  </div>
</div>