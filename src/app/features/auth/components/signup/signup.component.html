<div class="header_container">
  <div class="auth_cont">
    <div class="signup-header">
      <h1>{{'Join_Our_Platform' | translate}}</h1>
      <p>{{'Follow_the_steps_to_create_your_account' | translate}}</p>
    </div>

    <form #loginForm="ngForm" class="login_form">
      <div class="inputs_cont">

        <div *ngIf="step1" class="step-animation">
          
          <div *ngIf="businesses.length > 1">
            <label class="section-label">{{'Choose_your_Business' | translate}}</label>
            <div class="business-grid">
              <div *ngFor="let b of businesses" 
                   class="business-card" 
                   [class.selected]="selectedBusinessId === b._id"
                   (click)="selectedBusinessId = b._id">
                <div class="card-header">
                  <span class="biz-name">{{ b.name }}</span>
                  <div class="selection-indicator"></div>
                </div>
                <div class="owner-info" *ngIf="b.owner">
                  <div class="avatar">{{ b.owner.fullName[0] }}</div>
                  <div class="owner-details">
                    <span class="label">{{'Owner' | translate}}</span>
                    <span class="owner-name">{{ b.owner.fullName }}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="mobile-section">
            <!-- <div *ngIf="businesses.length === 1" class="selected-business-badge">
              Registering for: <strong>{{ businesses[0].name }}</strong>
            </div> -->

        <input 
        type="text" 
        name="mobile" 
        [(ngModel)]="mobileNumber" 
        placeholder="Enter your mobile" 
        required 
        maxlength="9"
        class="login_input" 
        />

        <button 
        [disabled]="!selectedBusinessId || mobileNumber.length !== 9" 
        (click)="sendVerificationCodeMobileMessage()" 
        class="main_button"
        >
        {{'Next_Send_Code' | translate}}
        </button>
          </div>
        </div>

        <div *ngIf="step2" class="step-animation">
          <div class="verification-box">
            <p> {{'Verification_code_sent_to' | translate}} <strong>{{mobileNumber}}</strong></p>
            <div class="code-input-row">
              <input type="text" name="Code" [(ngModel)]="code" placeholder="Enter 6-digit code" required class="login_input center-text" />
              <div class="timer-ring">{{countDownSeconds}}s</div>
            </div>
            <button (click)="confirmCode()" class="main_button w-100">{{'Confirm_Code' | translate}}</button>
          </div>
        </div>

        <div *ngIf="step3" class="step-animation">
          <input type="text" name="fullName" [(ngModel)]="fullName" placeholder="Full Name" required class="login_input" />
          <input type="password" name="password" [(ngModel)]="password" placeholder="Create Password" class="login_input" />
          <input type="password" name="password2" [(ngModel)]="password2" placeholder="Repeat Password" class="login_input" />
          
          <button (click)="signUp()" class="main_button w-100 mt-20">{{'Complete_Registration' | translate}}</button>
        </div>
      </div>

      <div class="message-area">
        <div *ngIf="errorMessage" class="msg error">{{errorMessage}}</div>
        <div *ngIf="successMessage" class="msg success">{{successMessage}}</div>
      </div>
    </form>
  </div>
</div>