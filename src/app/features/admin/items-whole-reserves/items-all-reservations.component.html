<div class="reservation-card glass-panel" *ngIf="businessChosen">
  <div class="card-header">
    <span class="material-icons">event_available</span>
    <h3>Instant Reservation</h3>
  </div>

  <div class="reservation-body">
    <div class="input-group">
      <label><span class="material-icons">person</span> Customer</label>
      <select [(ngModel)]="selectedUser" class="cyber-input">
        <option value="">Guest User</option>
        <option *ngFor="let user of users" [value]="user._id">
          {{ user.fullName }}
        </option>
      </select>
    </div>

    <div class="input-group">
    <label><span class="material-icons">timer</span> Quick Duration (From Now)</label>
    <div class="quick-date-chips">
      <button (click)="reserveForDuration(60)">1 Hour</button>
      <button (click)="reserveForDuration(120)">2 Hours</button>
      <button (click)="reserveForDuration(180)">3 Hours</button>
    </div>
  </div>

    <div class="input-group">
      <label><span class="material-icons">bolt</span> Quick Select</label>
      <div class="quick-date-chips">
        <button [class.active]="quickDate === 'today'" (click)="setQuickDate('today', false)">Today</button>
        <button [class.active]="quickDate === 'tomorrow'" (click)="setQuickDate('tomorrow', false)">Tomorrow</button>
        <button [class.active]="quickDate === 'dayAfter'" (click)="setQuickDate('dayAfter', false)">Upcoming</button>
      </div>
    </div>

    <div class="input-group" [class.faded]="quickDate !== null">
      <label><span class="material-icons">calendar_today</span> Specific Date</label>
      <input
        type="date"
        [(ngModel)]="selectedDate"
        (change)="onManualDateChange()"
        [disabled]="quickDate !== null"
        class="cyber-input"
      />
    </div>

    <div class="slots-section">
      <div class="section-label">
        <label>Select Time Range</label>
        <span class="hint">Tap start & end time</span>
      </div>
      
      <div class="slots-grid-container">
        <div class="slots-grid">
          <div 
            *ngFor="let slot of timeSlots" 
            class="slot-pill" 
            [class.free]="slot.free" 
            [class.busy]="!slot.free"
            [class.selected]="slot.selected"
            (click)="selectSlot(slot)"
          >
            <span class="time">{{ slot.label }}</span>
          </div>
        </div>
      </div>
    </div>

    <div class="reservation-footer">
      <label class="paid-toggle">
        <input type="checkbox" [(ngModel)]="isPaid" />
        <span class="toggle-box"></span>
        <span class="toggle-text">Payment Received</span>
      </label>

      <button class="btn-reserve" (click)="reserveSelected()">
        <span class="material-icons">add_task</span>
        Confirm Reservation
      </button>
    </div>
    
  </div>
  
</div>


    <div class="reservation-card glass-panel management-section">
  <div class="card-header">
    <span class="material-icons">list_alt</span>
    <h3>Active Reservations</h3>
  </div>

  <div class="reservation-body">
    <div class="res-list">
      <div *ngIf="allReservations.length === 0" class="empty-state">
        No active reservations for these items.
      </div>

      <div *ngFor="let res of allReservations" style="color:#2ecc71" class="res-item">
        <div class="res-info">
          <div class="res-main">
            <span class="item-name">{{ res.item.name }}</span>
            <span class="res-time">
              {{ res.startHour | number:'2.0' }}:{{ res.startMinute | number:'2.0' }} - 
              {{ res.endHour | number:'2.0' }}:{{ res.endMinute | number:'2.0' }}
            </span>
          </div>
          <div class="res-sub">
            <span class="res-date">{{ res.date | date:'mediumDate' }}</span>
            <span class="status-badge" [class.paid]="res.isPaid">
              {{ res.isPaid ? 'Paid' : 'Unpaid' }}
            </span>
          </div>
        </div>

        <button class="btn-delete" (click)="deleteReservation(res._id)" title="Delete Reservation">
          <span class="material-icons">delete_outline</span>
        </button>
      </div>
    </div>
  </div>
</div>

